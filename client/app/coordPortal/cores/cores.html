<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container-fluid">
	<div class="row">
		<div class="col-sm-offset-2 col-sm-4">
			<div class="container-fluid">
				<h4><b>Welcome {{ user.name }}</b></h4>
				<br>
				<p>All applications to your department will be shown here</p>
				<br>
				<h5><b>Hope you find it easy to use! ^_^</b></h5>
			</div>
			<br><br>
			<table ng-show="1" st-table="responses" class="table table-striped">
				<thead>
					<tr>
						<th>Name</th>
						<th>Applying for</th>
						<th>Position</th>
						<!-- <th>Department</th> -->
						<!-- <th>Sub-Department</th> -->
						<th>Response</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="response in responses">
						<td>{{response.user.name}}</td>
						<td>{{response.form.name}}</td>
						<td>{{response.form.position}}</td>
						<!-- <td>{{response.form.department}}</td> -->
						<!-- <td>{{response.form.subDepartment}}</td> -->
						<td><button class="btn btn-primary" ng-click="showResponse(response)">View<a/></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="col-sm-4" ng-show="responseDetails">
			<div class="container-fluid">
				<h4><b>Responses from {{ response.user.name }} for {{response.form.name}}</b></h4>
				<br>
			</div>
			<table ng-show="1" st-table="responses" class="table table-striped">
				<thead>
					<tr>
						<th>Question</th>
						<th>Answer</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="set in response.values">
						<td>{{set.field_title}}</td>
						<td>{{set.field_value}}</td>
					</tr>
				</tbody>
			</table>
			<div>
				<h5>Comments:</h5>
				<textarea ng-model="response.comments"></textarea>
			</div>
			<div class="btn-group">
		        <label class="btn btn-success" ng-model="response.status" btn-radio="'Selected'" uncheckable>Select</label>
		        <label class="btn btn-warning" ng-model="response.status" btn-radio="'Shortlisted'" uncheckable>Shortlist</label>
		        <label class="btn btn-danger" ng-model="response.status" btn-radio="'Rejected'" uncheckable>Reject</label>
		    </div>
		    <br><br>
		    <button class="btn btn-success">Save</button>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-offset-2 col-md-6">
			<p>Departments under {{department.name}}:</p>
			<ul>
				<li ng-repeat="subDepartment in department.subDepartments">{{subDepartment.name}}</li>
			</ul>
		</div>
		<div class="col-sm-offset-3 col-md-6 form-inline">
			<input class="form-control" ng-model="newSubDepartment"></input>
			<button class="btn btn-primary" ng-click="addSubDepartment()">Add Subdepartment</button>
		</div>
	</div>
</div>